@using mojoPortal.Business.WebHelpers;
@using mojoPortal.Business;

@{ 
	var siteSettings = CacheHelper.GetCurrentSiteSettings();
	var pageSettings = new PageSettings(Model.Site.Id, Model.Page.Id);
	var module = new Module(Model.Module.Guid);


	if (!pageSettings.BodyCssClass.Contains("food"))
	{
		pageSettings.BodyCssClass += " food";
		pageSettings.BodyCssClass = pageSettings.BodyCssClass.Trim();
		pageSettings.Save();
	}

}
<div class="content-slider" id="module@Model.Module.Id" data-contentsection="@Model.Config.ModuleFriendlyName">
	<@Model.Module.TitleElement class="content-slider__title moduletitle" data-moduleid="module@Model.Module.Id">
		@Model.Module.Title

		@if (Model.Module.IsEditable)
		{
			<a class="ModuleEditLink flexi-settings" href="~/Admin/ModuleSettings.aspx?pageid=@Model.Page.Id&mid=@Model.Module.Id"><span class="fa fa-cog"></span> Settings</a>
			<a class="ModuleEditLink flexi-item-add" href="~/SuperFlexi/Edit.aspx?pageid=@Model.Page.Id&mid=@Model.Module.Id"><span class="fa fa-plus"></span> Add Slide</a>
			if (Model.Config.UseHeader)
			{<a class="ModuleEditLink flexi-header-edit" href="~/SuperFlexi/EditHeader.aspx?pageid=@Model.Page.Id&mid=@Model.Module.Id"><span class="fa fa-edit"></span> Edit Header</a>}
			if (Model.Config.UseFooter)
			{<a class="ModuleEditLink flexi-footer-edit" href="~/SuperFlexi/EditFooter.aspx?pageid=@Model.Page.Id&mid=@Model.Module.Id"><span class="fa fa-edit"></span> Edit Footer</a>}
			if (Model.Config.AllowImport)
			{<a class='ModuleEditLink flexi-import-link' href='~/SuperFlexi/Import.aspx?pageid=@Model.Page.Id&mid=@Model.Module.Id'><span class='fa fa-upload'></span>&nbsp;Import</a>}
			if (Model.Config.AllowExport)
			{<a class='ModuleEditLink flexi-export-link' href='~/SuperFlexi/Export.aspx?pageid=@Model.Page.Id&mid=@Model.Module.Id'><span class='fa fa-download'></span>&nbsp;Export</a>}
		}
	</@Model.Module.TitleElement>

	@if (Model.Config.UseHeader && !string.IsNullOrWhiteSpace(Model.Config.HeaderContent))
	{
		<div class="content-slider__header">@Html.Raw(@Model.Config.HeaderContent)</div>
	}
	<div class="content-slider__items" id="content-slider-@Model.Module.Id">
		@foreach (var item in Model.Items)
		{
			<div class="content-slider__item" style="background-image: url(@item.image);">
				@if (item.IsEditable)
				{
					<a class="ModuleEditLink flexi-item-edit" href="@item.EditUrl"><span class="fa fa-edit"></span> Edit Slide</a>
				}
				<div class="content-slider__content">@item.content</div>
			</div> 
		}
	</div>
	<div class="content-slider__controls"></div>
	@if (Model.Config.UseFooter && !string.IsNullOrWhiteSpace(Model.Config.FooterContent))
	{
		<div class="content-slider__footer">@Html.Raw(@Model.Config.HeaderContent)</div>
	}

	<script>$(document).ready(function () {  });</script>
	</div>
	@if (Model.Module.IsEditable && Model.Config.IsDevelopment)
	{
		<a href="#modelinfo@(Model.Module.Id)" data-toggle="collapse">show/hide model info</a>
			<div class="collapse" id="modelinfo@(Model.Module.Id)">@ObjectInfo.Print(Model)
				<style>.objectinfo {text-align:left;}</style>
			</div>
	}
